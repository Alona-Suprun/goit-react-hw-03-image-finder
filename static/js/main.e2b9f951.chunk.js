(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__1qwMf",searchForm:"Searchbar_searchForm__3lNcM",searchFormInput:"Searchbar_searchFormInput__10PTv"}},13:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3c7G0",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__2K_kv"}},14:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2kW0a",Modal:"Modal_Modal__3xQs0"}},17:function(e,t,a){e.exports={button:"Button_button__2v62q"}},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),s=a(3),i=a(4),l=a(6),u=a(5),h=a(8),d=(a(23),a(15)),m=a(12),p=a.n(m),g=(a(44),a(9)),j=a.n(g),b=a(13),f=a.n(b),y=a(1),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onImageClick=function(t){e.props.modalContent(t.target.dataset.url,t.target.alt),e.props.openModal()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return Object(y.jsx)(y.Fragment,{children:this.props.image.map((function(t){var a=t.tags,n=t.id,r=t.webformatURL,o=t.largeImageURL;return Object(y.jsx)("li",{className:f.a.ImageGalleryItem,children:Object(y.jsx)("img",{src:r,alt:a,className:f.a.ImageGalleryItemImage,"data-url":o,onClick:e.onImageClick})},n)}))})}}]),a}(n.Component),v=a(16),x=a(18),k=a(17),C=a.n(k),_=["children","onClick"],w=function(e){var t=e.children,a=e.onClick,n=Object(x.a)(e,_);return Object(y.jsx)("button",Object(v.a)(Object(v.a)({className:C.a.button,onClick:a},n),{},{children:t}))};w.defaultProps={onClick:function(){return null},children:null};var I=w,S=new(function(){function e(){Object(s.a)(this,e),this.searchQuery="",this.page=1}return Object(i.a)(e,[{key:"fetchImagesApi",value:function(){var e=this;return fetch("".concat("https://pixabay.com/api/","?image_type=photo&orientation=horizontal&q=").concat(this.searchQuery,"&page=").concat(this.page,"&per_page=12&key=").concat("22049228-dddf73462342363350e266d0d")).then((function(e){return e.json()})).then((function(t){var a=t.hits;return e.incrementPage(),a}))}},{key:"incrementPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}]),e}()),M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={image:null,error:null,status:"idle",loading:!1},e.onClick=function(){var t=document.documentElement.scrollHeight-141;S.fetchImagesApi().then((function(a){e.setState((function(e){return{loading:!e.loading,image:[].concat(Object(d.a)(e.image),Object(d.a)(a))}})),window.scrollTo({top:t,behavior:"smooth"})})).finally(e.setState((function(e){return{loading:!e.loading}})))},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=e.searchValue,r=this.props.searchValue;n!==r&&(this.setState({status:"pending",loading:!0}),S.query=this.props.searchValue,S.fetchImagesApi(r).then((function(e){if(0===e.length)return Object(h.b)("Sorry, there is no image of ".concat(a.props.searchValue,"!")),void a.setState({image:e,status:"rejected"});a.setState({image:e,status:"resolved"})})).catch((function(e){a.setState({error:e,status:"rejected"})})))}},{key:"render",value:function(){var e=this.state,t=e.image,a=e.status,n=e.loading;return"idle"===a?Object(y.jsx)("h2",{className:j.a.heading,children:"Type what kind of image you're looking for in the search bar."}):"pending"===a?Object(y.jsx)("div",{style:{textAlign:"center"},children:Object(y.jsx)(p.a,{type:"Bars"})}):"rejected"===a?Object(y.jsx)("h2",{className:j.a.heading,children:"Try again."}):"resolved"===a?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("ul",{className:j.a.imageGallery,children:Object(y.jsx)(O,{image:t,openModal:this.props.openModal,modalContent:this.props.modalContent})}),n?Object(y.jsx)("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:Object(y.jsx)(I,{type:"button",onClick:this.onClick,children:"Load more"})}):Object(y.jsx)("div",{style:{textAlign:"center"},children:Object(y.jsx)(p.a,{type:"Bars"})})]}):void 0}}]),a}(n.Component),V=a(10),A=a.n(V),G=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchValue:""},e.onChange=function(t){e.setState({searchValue:t.currentTarget.value.toLowerCase()})},e.onSubmit=function(t){t.preventDefault(),""!==e.state.searchValue.trim()?(e.props.onSubmit(e.state.searchValue),e.setState({searchValue:""})):Object(h.b)("Please type something to find image you want")},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(y.jsx)("header",{className:A.a.searchbar,children:Object(y.jsxs)("form",{className:A.a.searchForm,onSubmit:this.onSubmit,children:[Object(y.jsx)("input",{className:A.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchValue,onChange:this.onChange}),Object(y.jsx)(I,{type:"submit",children:"Search"})]})})}}]),a}(n.Component),N=a(14),F=a.n(N),B=document.querySelector("#modal-root"),P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(o.createPortal)(Object(y.jsx)("div",{className:F.a.Overlay,onClick:this.handleBackdropClick,children:Object(y.jsx)("div",{className:F.a.Modal,children:this.props.children})}),B)}}]),a}(n.Component),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchValue:"",showModal:!1,modalUrl:"",modalAlt:""},e.onSubmit=function(t){e.setState({searchValue:t})},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.modalContent=function(t,a){e.setState({modalUrl:t,modalAlt:a})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.showModal;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(G,{onSubmit:this.onSubmit}),Object(y.jsx)(M,{searchValue:this.state.searchValue,openModal:this.toggleModal,modalContent:this.modalContent}),e&&Object(y.jsx)(P,{onClose:this.toggleModal,modalContent:this.modalContent,children:Object(y.jsx)("img",{src:this.state.modalUrl,alt:this.state.modalAlt})}),Object(y.jsx)(h.a,{position:"top-center",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}}]),a}(n.Component);a(46);c.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(T,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__3mSp_",heading:"ImageGallery_heading__3cYV7"}}},[[47,1,2]]]);
//# sourceMappingURL=main.e2b9f951.chunk.js.map